{"version":3,"sources":["file:///D:/CocosDashboard/resources/.editors/Creator/3.6.0/resources/app.asar.unpacked/modules/editor-extensions/extensions/localization-editor/static/assets/components/l10n-label.ts"],"names":["_decorator","CCInteger","EDITOR","l10n","L10nComponent","ccclass","property","executeInEditMode","menu","L10nLabel","visible","type","key","value","_key","render","count","_count","onLoad","translatedString","t","label","preview","string"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAEZC,MAAAA,M,UAAAA,M;;AACFC,MAAAA,I;;AACAC,MAAAA,a;;;;;;;;;OAED;AACFC,QAAAA,OADE;AAEFC,QAAAA,QAFE;AAGFC,QAAAA,iBAHE;AAIFC,QAAAA;AAJE,O,GAKFR,U;;yBAKiBS,S,WAHpBJ,OAAO,CAAC,WAAD,C,UACPE,iBAAiB,CAAC,IAAD,C,UACjBC,IAAI,CAAC,8BAAD,C,UAEAF,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UAGRJ,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UASRJ,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UAERJ,QAAQ,CAAC;AACNK,QAAAA,IAAI,EAAEV,SADA;AAENS,QAAAA,OAAO,EAAE;AAFH,OAAD,C,yDAlBb,MAGqBD,SAHrB;AAAA;AAAA,0CAGqD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAK1C,YAAHG,GAAG,CAACC,KAAD,EAAgB;AACnB,eAAKC,IAAL,GAAYD,KAAZ;AACA,eAAKE,MAAL;AACH;;AAEM,YAAHH,GAAG,GAAW;AACd,iBAAO,KAAKE,IAAZ;AACH;;AAOQ,YAALE,KAAK,CAACH,KAAD,EAAgB;AACrB,eAAKI,MAAL,GAAcJ,KAAd;AACA,eAAKE,MAAL;AACH;;AAEQ,YAALC,KAAK,GAAW;AAChB,iBAAO,KAAKC,MAAZ;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,cAAI,OAAO,MAAMA,MAAb,KAAwB,UAA5B,EAAwC;AACpC,kBAAMA,MAAN;AACH;AACJ;;AAEDH,QAAAA,MAAM,GAAG;AACL,gBAAMI,gBAAgB,GAAG;AAAA;AAAA,4BAAKC,CAAL,CAAO,KAAKN,IAAZ,EAAkB;AAAEE,YAAAA,KAAK,EAAE,KAAKC;AAAd,WAAlB,CAAzB;;AACA,cAAI,OAAO,KAAKI,KAAZ,KAAsB,WAAtB,IAAqC,OAAOF,gBAAP,KAA4B,WAArE,EAAkF;AAC9E;AACH;;AACD,cAAIjB,MAAJ,EAAY;AACR,iBAAKoB,OAAL,CAAaH,gBAAb;AACH,WAFD,MAEO;AACH,iBAAKE,KAAL,CAAYE,MAAZ,GAAqBJ,gBAArB;AACH;AACJ;;AA5CgD,O;;;;;iBAEtC,E;;;;;;;iBAYE,C","sourcesContent":["import { _decorator, CCInteger, Label } from 'cc';\n// @ts-ignore\nimport { EDITOR } from 'cc/env';\nimport l10n from '../core/l10n-manager';\nimport L10nComponent from './l10n-component';\n\nconst {\n    ccclass,\n    property,\n    executeInEditMode,\n    menu,\n} = _decorator;\n\n@ccclass('L10nLabel')\n@executeInEditMode(true)\n@menu('LocalizationEditor/L10nLabel')\nexport default class L10nLabel extends L10nComponent {\n    @property({ visible: false })\n        _key = '';\n\n    @property({ visible: true })\n    set key(value: string) {\n        this._key = value;\n        this.render();\n    }\n\n    get key(): string {\n        return this._key;\n    }\n    @property({ visible: false })\n        _count = 0;\n    @property({\n        type: CCInteger,\n        visible: true,\n    })\n    set count(value: number) {\n        this._count = value;\n        this.render();\n    }\n\n    get count(): number {\n        return this._count;\n    }\n\n    onLoad() {\n        if (typeof super.onLoad === 'function') {\n            super.onLoad();\n        }\n    }\n\n    render() {\n        const translatedString = l10n.t(this._key, { count: this._count });\n        if (typeof this.label === 'undefined' || typeof translatedString === 'undefined') {\n            return;\n        }\n        if (EDITOR) {\n            this.preview(translatedString);\n        } else {\n            this.label!.string = translatedString;\n        }\n    }\n}\n"]}