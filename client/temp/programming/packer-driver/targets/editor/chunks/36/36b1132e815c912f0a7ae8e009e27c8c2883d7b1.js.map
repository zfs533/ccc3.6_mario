{"version":3,"sources":["file:///D:/CocosDashboard/resources/.editors/Creator/3.6.0/resources/app.asar.unpacked/modules/editor-extensions/extensions/localization-editor/node_modules/@formatjs/intl-datetimeformat/src/abstract/PartitionDateTimeRangePattern.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","PartitionDateTimeRangePattern","ecma402_abstract_1","ToLocalTime_1","FormatDateTimePattern_1","TABLE_2_FIELDS","dtf","x","y","implDetails","TimeClip","isNaN","RangeError","getInternalSlots","tzData","internalSlots","tm1","ToLocalTime","calendar","timeZone","tm2","pattern","rangePatterns","rangePattern","dateFieldsPracticallyEqual","patternContainsLargerDateField","_i","TABLE_2_FIELDS_1","length","fieldName","rp","undefined","v1","hour","v2","fractionalSecondDigits","Math","floor","millisecond","pow","SameValue","result_2","FormatDateTimePattern","PartitionPattern","_a","result_1","r","source","RangePatternType","shared","result","default","_b","_c","patternParts","patternPart","_d","_e","rangePatternPart","pattern_1","z","startRange","partResult","_f","partResult_1","concat","_cjsExports","___esModule","__esModule","_PartitionDateTimeRangePattern"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@formatjs/ecma402-abstract';\nimport { __cjsMetaURL as _req0} from './ToLocalTime';\nimport { __cjsMetaURL as _req1} from './FormatDateTimePattern';\nlet _cjsExports;\nlet ___esModule;\nlet _PartitionDateTimeRangePattern;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n Object.defineProperty(exports, \"__esModule\", { value: true });\n exports.PartitionDateTimeRangePattern = void 0;\n var ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\n var ToLocalTime_1 = require(\"./ToLocalTime\");\n var FormatDateTimePattern_1 = require(\"./FormatDateTimePattern\");\n var TABLE_2_FIELDS = [\n     'era',\n     'year',\n     'month',\n     'day',\n     'dayPeriod',\n     'ampm',\n     'hour',\n     'minute',\n     'second',\n     'fractionalSecondDigits',\n ];\n function PartitionDateTimeRangePattern(dtf, x, y, implDetails) {\n     x = (0, ecma402_abstract_1.TimeClip)(x);\n     if (isNaN(x)) {\n         throw new RangeError('Invalid start time');\n     }\n     y = (0, ecma402_abstract_1.TimeClip)(y);\n     if (isNaN(y)) {\n         throw new RangeError('Invalid end time');\n     }\n     /** IMPL START */\n     var getInternalSlots = implDetails.getInternalSlots, tzData = implDetails.tzData;\n     var internalSlots = getInternalSlots(dtf);\n     /** IMPL END */\n     var tm1 = (0, ToLocalTime_1.ToLocalTime)(x, \n     // @ts-ignore\n     internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n     var tm2 = (0, ToLocalTime_1.ToLocalTime)(y, \n     // @ts-ignore\n     internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n     var pattern = internalSlots.pattern, rangePatterns = internalSlots.rangePatterns;\n     var rangePattern;\n     var dateFieldsPracticallyEqual = true;\n     var patternContainsLargerDateField = false;\n     for (var _i = 0, TABLE_2_FIELDS_1 = TABLE_2_FIELDS; _i < TABLE_2_FIELDS_1.length; _i++) {\n         var fieldName = TABLE_2_FIELDS_1[_i];\n         if (dateFieldsPracticallyEqual && !patternContainsLargerDateField) {\n             var rp = fieldName in rangePatterns ? rangePatterns[fieldName] : undefined;\n             if (rangePattern !== undefined && rp === undefined) {\n                 patternContainsLargerDateField = true;\n             }\n             else {\n                 rangePattern = rp;\n                 if (fieldName === 'ampm') {\n                     var v1 = tm1.hour;\n                     var v2 = tm2.hour;\n                     if ((v1 > 11 && v2 < 11) || (v1 < 11 && v2 > 11)) {\n                         dateFieldsPracticallyEqual = false;\n                     }\n                 }\n                 else if (fieldName === 'dayPeriod') {\n                     // TODO\n                 }\n                 else if (fieldName === 'fractionalSecondDigits') {\n                     var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n                     if (fractionalSecondDigits === undefined) {\n                         fractionalSecondDigits = 3;\n                     }\n                     var v1 = Math.floor(tm1.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                     var v2 = Math.floor(tm2.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                     if (!(0, ecma402_abstract_1.SameValue)(v1, v2)) {\n                         dateFieldsPracticallyEqual = false;\n                     }\n                 }\n                 else {\n                     var v1 = tm1[fieldName];\n                     var v2 = tm2[fieldName];\n                     if (!(0, ecma402_abstract_1.SameValue)(v1, v2)) {\n                         dateFieldsPracticallyEqual = false;\n                     }\n                 }\n             }\n         }\n     }\n     if (dateFieldsPracticallyEqual) {\n         var result_2 = (0, FormatDateTimePattern_1.FormatDateTimePattern)(dtf, (0, ecma402_abstract_1.PartitionPattern)(pattern), x, implDetails);\n         for (var _a = 0, result_1 = result_2; _a < result_1.length; _a++) {\n             var r = result_1[_a];\n             r.source = ecma402_abstract_1.RangePatternType.shared;\n         }\n         return result_2;\n     }\n     var result = [];\n     if (rangePattern === undefined) {\n         rangePattern = rangePatterns.default;\n         /** IMPL DETAILS */\n         // Now we have to replace {0} & {1} with actual pattern\n         for (var _b = 0, _c = rangePattern.patternParts; _b < _c.length; _b++) {\n             var patternPart = _c[_b];\n             if (patternPart.pattern === '{0}' || patternPart.pattern === '{1}') {\n                 patternPart.pattern = pattern;\n             }\n         }\n     }\n     for (var _d = 0, _e = rangePattern.patternParts; _d < _e.length; _d++) {\n         var rangePatternPart = _e[_d];\n         var source = rangePatternPart.source, pattern_1 = rangePatternPart.pattern;\n         var z = void 0;\n         if (source === ecma402_abstract_1.RangePatternType.startRange ||\n             source === ecma402_abstract_1.RangePatternType.shared) {\n             z = x;\n         }\n         else {\n             z = y;\n         }\n         var patternParts = (0, ecma402_abstract_1.PartitionPattern)(pattern_1);\n         var partResult = (0, FormatDateTimePattern_1.FormatDateTimePattern)(dtf, patternParts, z, implDetails);\n         for (var _f = 0, partResult_1 = partResult; _f < partResult_1.length; _f++) {\n             var r = partResult_1[_f];\n             r.source = source;\n         }\n         result = result.concat(partResult);\n     }\n     return result;\n }\n exports.PartitionDateTimeRangePattern = PartitionDateTimeRangePattern;\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_PartitionDateTimeRangePattern = module.exports.PartitionDateTimeRangePattern;\n\n}, () => ({\n  '@formatjs/ecma402-abstract': _req,\n  './ToLocalTime': _req0,\n  './FormatDateTimePattern': _req1,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}