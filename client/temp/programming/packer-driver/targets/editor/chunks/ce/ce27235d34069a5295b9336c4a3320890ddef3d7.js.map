{"version":3,"sources":["file:///E:/CocosCreator/git/mario/client/assets/script/game/roles/enemy/enemyBlack.ts"],"names":["_decorator","UITransform","clientEvent","Constant","enemy","ccclass","property","enemyBlack","onBeginContact","selfCollider","otherCollider","contact","isDeath","name1","node","name","name2","includes","y1","position","y","h2","getComponent","height","y2","playDeath","dispatchEvent","EVENT_TYPE","MarioDeath"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA4DC,MAAAA,W,OAAAA,W;;AAC5DC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;4BAGjBO,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb;AAAA;AAAA,0BACsC;AAE3BC,QAAAA,cAAc,CAACC,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF;AAC1G,gBAAMH,cAAN,CAAqBC,YAArB,EAAmCC,aAAnC,EAAkDC,OAAlD;AACA,cAAI,KAAKC,OAAT,EAAkB,OAFwF,CAG1G;;AACA,cAAIC,KAAK,GAAGJ,YAAY,CAACK,IAAb,CAAkBC,IAA9B;AACA,cAAIC,KAAK,GAAGN,aAAa,CAACI,IAAd,CAAmBC,IAA/B;;AACA,cAAIC,KAAK,CAACC,QAAN,CAAe,OAAf,CAAJ,EAA6B;AACzB,gBAAIC,EAAE,GAAGT,YAAY,CAACK,IAAb,CAAkBK,QAAlB,CAA2BC,CAApC;AACA,gBAAIC,EAAE,GAAGZ,YAAY,CAACK,IAAb,CAAkBQ,YAAlB,CAA+BrB,WAA/B,EAA4CsB,MAArD;AACAL,YAAAA,EAAE,IAAIG,EAAN;AACA,gBAAIG,EAAE,GAAGd,aAAa,CAACI,IAAd,CAAmBK,QAAnB,CAA4BC,CAArC;;AACA,gBAAII,EAAE,IAAIN,EAAV,EAAc;AACV,mBAAKO,SAAL;AACH,aAFD,MAGK;AACD;AAAA;AAAA,8CAAYC,aAAZ,CAA0B;AAAA;AAAA,wCAASC,UAAT,CAAoBC,UAA9C;AACH;AACJ;AACJ;;AApBiC,O","sourcesContent":["import { _decorator, Animation, Node, Collider2D, IPhysics2DContact, UITransform, BoxCollider2D, RigidBody2D } from 'cc';\r\nimport { clientEvent } from '../../../framework/clientEvent';\r\nimport { Constant } from '../../../framework/constant';\r\nimport { enemy } from './enemy';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('enemyBlack')\r\nexport class enemyBlack extends enemy {\r\n\r\n    public onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\r\n        super.onBeginContact(selfCollider, otherCollider, contact);\r\n        if (this.isDeath) return;\r\n        // 只在两个碰撞体开始接触时被调用一次\r\n        let name1 = selfCollider.node.name;\r\n        let name2 = otherCollider.node.name;\r\n        if (name2.includes(\"mario\")) {\r\n            let y1 = selfCollider.node.position.y;\r\n            let h2 = selfCollider.node.getComponent(UITransform).height;\r\n            y1 += h2;\r\n            let y2 = otherCollider.node.position.y\r\n            if (y2 >= y1) {\r\n                this.playDeath();\r\n            }\r\n            else {\r\n                clientEvent.dispatchEvent(Constant.EVENT_TYPE.MarioDeath);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n"]}