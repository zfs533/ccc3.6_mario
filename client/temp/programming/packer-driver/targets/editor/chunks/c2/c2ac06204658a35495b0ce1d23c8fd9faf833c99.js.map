{"version":3,"sources":["file:///D:/CocosDashboard/resources/.editors/Creator/3.6.0/resources/app.asar.unpacked/modules/editor-extensions/extensions/localization-editor/node_modules/@formatjs/intl-localematcher/abstract/ResolveLocale.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","ResolveLocale","LookupMatcher_1","BestFitMatcher_1","utils_1","UnicodeExtensionValue_1","availableLocales","requestedLocales","options","relevantExtensionKeys","localeData","getDefaultLocale","matcher","localeMatcher","r","LookupMatcher","BestFitMatcher","foundLocale","locale","result","dataLocale","supportedExtension","_i","relevantExtensionKeys_1","length","key","invariant","concat","foundLocaleData","keyLocaleData","Array","isArray","supportedExtensionAddition","extension","requestedValue","UnicodeExtensionValue","undefined","indexOf","optionsValue","privateIndex","preExtension","slice","postExtension","Intl","getCanonicalLocales","_cjsExports","___esModule","__esModule","_ResolveLocale"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from './LookupMatcher';\nimport { __cjsMetaURL as _req0} from './BestFitMatcher';\nimport { __cjsMetaURL as _req1} from './utils';\nimport { __cjsMetaURL as _req2} from './UnicodeExtensionValue';\nlet _cjsExports;\nlet ___esModule;\nlet _ResolveLocale;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n Object.defineProperty(exports, \"__esModule\", { value: true });\n exports.ResolveLocale = void 0;\n var LookupMatcher_1 = require(\"./LookupMatcher\");\n var BestFitMatcher_1 = require(\"./BestFitMatcher\");\n var utils_1 = require(\"./utils\");\n var UnicodeExtensionValue_1 = require(\"./UnicodeExtensionValue\");\n /**\n  * https://tc39.es/ecma402/#sec-resolvelocale\n  */\n function ResolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData, getDefaultLocale) {\n     var matcher = options.localeMatcher;\n     var r;\n     if (matcher === 'lookup') {\n         r = (0, LookupMatcher_1.LookupMatcher)(availableLocales, requestedLocales, getDefaultLocale);\n     }\n     else {\n         r = (0, BestFitMatcher_1.BestFitMatcher)(availableLocales, requestedLocales, getDefaultLocale);\n     }\n     var foundLocale = r.locale;\n     var result = { locale: '', dataLocale: foundLocale };\n     var supportedExtension = '-u';\n     for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n         var key = relevantExtensionKeys_1[_i];\n         (0, utils_1.invariant)(foundLocale in localeData, \"Missing locale data for \".concat(foundLocale));\n         var foundLocaleData = localeData[foundLocale];\n         (0, utils_1.invariant)(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \".concat(key, \" must be an object\"));\n         var keyLocaleData = foundLocaleData[key];\n         (0, utils_1.invariant)(Array.isArray(keyLocaleData), \"keyLocaleData for \".concat(key, \" must be an array\"));\n         var value = keyLocaleData[0];\n         (0, utils_1.invariant)(typeof value === 'string' || value === null, \"value must be string or null but got \".concat(typeof value, \" in key \").concat(key));\n         var supportedExtensionAddition = '';\n         if (r.extension) {\n             var requestedValue = (0, UnicodeExtensionValue_1.UnicodeExtensionValue)(r.extension, key);\n             if (requestedValue !== undefined) {\n                 if (requestedValue !== '') {\n                     if (~keyLocaleData.indexOf(requestedValue)) {\n                         value = requestedValue;\n                         supportedExtensionAddition = \"-\".concat(key, \"-\").concat(value);\n                     }\n                 }\n                 else if (~requestedValue.indexOf('true')) {\n                     value = 'true';\n                     supportedExtensionAddition = \"-\".concat(key);\n                 }\n             }\n         }\n         if (key in options) {\n             var optionsValue = options[key];\n             (0, utils_1.invariant)(typeof optionsValue === 'string' ||\n                 typeof optionsValue === 'undefined' ||\n                 optionsValue === null, 'optionsValue must be String, Undefined or Null');\n             if (~keyLocaleData.indexOf(optionsValue)) {\n                 if (optionsValue !== value) {\n                     value = optionsValue;\n                     supportedExtensionAddition = '';\n                 }\n             }\n         }\n         result[key] = value;\n         supportedExtension += supportedExtensionAddition;\n     }\n     if (supportedExtension.length > 2) {\n         var privateIndex = foundLocale.indexOf('-x-');\n         if (privateIndex === -1) {\n             foundLocale = foundLocale + supportedExtension;\n         }\n         else {\n             var preExtension = foundLocale.slice(0, privateIndex);\n             var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n             foundLocale = preExtension + supportedExtension + postExtension;\n         }\n         foundLocale = Intl.getCanonicalLocales(foundLocale)[0];\n     }\n     result.locale = foundLocale;\n     return result;\n }\n exports.ResolveLocale = ResolveLocale;\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_ResolveLocale = module.exports.ResolveLocale;\n\n}, () => ({\n  './LookupMatcher': _req,\n  './BestFitMatcher': _req0,\n  './utils': _req1,\n  './UnicodeExtensionValue': _req2,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}