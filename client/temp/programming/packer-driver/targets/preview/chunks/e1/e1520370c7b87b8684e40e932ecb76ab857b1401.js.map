{"version":3,"sources":["file:///E:/CocosCreator/mario/ccc3.6_mario/client/assets/script/game/collider/baseCollider.ts"],"names":["BoxCollider2D","Collider2D","Component","Contact2DType","PolygonCollider2D","RigidBody2D","_decorator","ccclass","property","baseCollider","start","_handleCollider","collider","node","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","selfCollider","otherCollider","contact","name1","name","name2","setPhysicsGroup","group","rb2d","enabledContactListener","b2d","getRigidBody2d","getBoxCollider2d"],"mappings":";;;;;;;;;;AAASA,MAAAA,a,OAAAA,a;AAAeC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,a,OAAAA,a;AAAmCC,MAAAA,iB,OAAAA,iB;AAAoBC,MAAAA,W,OAAAA,W;AAAcC,MAAAA,U,OAAAA,U;;;;;;;;;OAC9G;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBF,U;;8BAGjBG,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb,SACkCP,SADlC,CAC4C;AACxCQ,QAAAA,KAAK,GAAG;AACJ,eAAKC,eAAL;AACH;;AACOA,QAAAA,eAAe,GAAG;AACtB,cAAIC,QAAQ,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBb,UAAvB,CAAf;;AACA,cAAIW,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACG,EAAT,CAAYZ,aAAa,CAACa,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACAL,YAAAA,QAAQ,CAACG,EAAT,CAAYZ,aAAa,CAACe,WAA1B,EAAuC,KAAKC,YAA5C,EAA0D,IAA1D;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACWF,QAAAA,cAAc,CAACG,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF;AAC1G;AACA,cAAIC,KAAK,GAAGH,YAAY,CAACP,IAAb,CAAkBW,IAA9B;AACA,cAAIC,KAAK,GAAGJ,aAAa,CAACR,IAAd,CAAmBW,IAA/B;AACH;;AAEML,QAAAA,YAAY,CAACC,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF,CACxG;AACA;AACH;AAED;AACJ;AACA;AACA;;;AACcI,QAAAA,eAAe,CAACC,KAAD,EAAc;AACnC,cAAIC,IAAkB,GAAG,KAAKf,IAAL,CAAUC,YAAV,CAAuBT,WAAvB,CAAzB;AACAuB,UAAAA,IAAI,CAACC,sBAAL,GAA8B,IAA9B;AACAD,UAAAA,IAAI,CAACD,KAAL,GAAaA,KAAb;AAEA,cAAIG,GAAc,GAAG,KAAKjB,IAAL,CAAUC,YAAV,CAAuBd,aAAvB,CAArB;AACA,cAAG,CAAC8B,GAAJ,EAAQA,GAAG,GAAG,KAAKjB,IAAL,CAAUC,YAAV,CAAuBV,iBAAvB,CAAN;AACR0B,UAAAA,GAAG,CAACH,KAAJ,GAAYA,KAAZ;AACH;;AAESI,QAAAA,cAAc,GAAE;AACtB,iBAAO,KAAKlB,IAAL,CAAUC,YAAV,CAAuBT,WAAvB,CAAP;AACH;;AAES2B,QAAAA,gBAAgB,GAAE;AACxB,iBAAO,KAAKnB,IAAL,CAAUC,YAAV,CAAuBb,UAAvB,CAAP;AACH;;AAjDuC,O","sourcesContent":["import { BoxCollider2D, Collider2D, Component, Contact2DType, IPhysics2DContact,  PolygonCollider2D,  RigidBody2D,  _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('baseCollider')\r\nexport class baseCollider extends Component {\r\n    start() {\r\n        this._handleCollider();\r\n    }\r\n    private _handleCollider() {\r\n        let collider = this.node.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 子类重写\r\n     * @param selfCollider \r\n     * @param otherCollider \r\n     * @param contact \r\n     */\r\n    public onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\r\n        // 只在两个碰撞体开始接触时被调用一次\r\n        let name1 = selfCollider.node.name;\r\n        let name2 = otherCollider.node.name;\r\n    }\r\n    \r\n    public onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\r\n        // 只在两个碰撞体结束接触时被调用一次\r\n        // console.log('onEndContact');\r\n    }\r\n\r\n    /**\r\n     * 物理分组设置\r\n     * @param group \r\n     */\r\n    protected setPhysicsGroup(group:number){\r\n        let rb2d : RigidBody2D = this.node.getComponent(RigidBody2D)\r\n        rb2d.enabledContactListener = true;\r\n        rb2d.group = group;\r\n        \r\n        let b2d:Collider2D = this.node.getComponent(BoxCollider2D);\r\n        if(!b2d)b2d = this.node.getComponent(PolygonCollider2D);\r\n        b2d.group = group;\r\n    }\r\n\r\n    protected getRigidBody2d(){\r\n        return this.node.getComponent(RigidBody2D);\r\n    }\r\n\r\n    protected getBoxCollider2d(){\r\n        return this.node.getComponent(Collider2D);\r\n    }\r\n}\r\n\r\n"]}